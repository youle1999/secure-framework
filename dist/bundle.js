(()=>{const t=document.getElementById("gameCanvas"),e=t.getContext("2d"),i=document.getElementById("startScreen"),n=document.getElementById("startButton"),d=document.getElementById("gameOverScreen"),l=document.getElementById("restartButton"),s=document.getElementById("finalScore");function h(){t.width=Math.min(window.innerWidth,800),t.height=.625*t.width}h(),window.addEventListener("resize",h);let a={x:t.width/2-50,y:t.height-50,width:100,height:20,speed:10},o=[],c=0,r=100,y=!1,w=!1,u={},x=0;window.addEventListener("keydown",(t=>u[t.key]=!0)),window.addEventListener("keyup",(t=>u[t.key]=!1)),t.addEventListener("touchstart",(t=>{x=t.touches[0].clientX,x>=a.x&&x<=a.x+a.width&&t.touches[0].clientY>=a.y&&(w=!0)})),t.addEventListener("touchmove",(e=>{if(w){const i=e.touches[0].clientX,n=i-x;a.x+=n,a.x<0&&(a.x=0),a.x>t.width-a.width&&(a.x=t.width-a.width),x=i}})),t.addEventListener("touchend",(()=>{w=!1}));class f{constructor(t,e){this.x=t,this.y=e,this.radius=10,this.speed=2*Math.random()+2}update(){this.y+=this.speed}draw(){e.beginPath(),e.arc(this.x,this.y,this.radius,0,2*Math.PI),e.fillStyle="yellow",e.fill(),e.closePath()}}function m(){y&&(e.clearRect(0,0,t.width,t.height),u.ArrowLeft&&a.x>0&&(a.x-=a.speed),u.ArrowRight&&a.x<t.width-a.width&&(a.x+=a.speed),e.fillStyle="white",e.fillRect(a.x,a.y,a.width,a.height),o.forEach((t=>{t.update(),t.draw()})),o.forEach(((e,i)=>{e.y+e.radius>a.y&&e.x>a.x&&e.x<a.x+a.width?(o.splice(i,1),c++):e.y>t.height&&(o.splice(i,1),r-=10)})),e.fillStyle="red",e.fillRect(10,10,200,20),e.fillStyle="green",e.fillRect(10,10,r/100*200,20),e.font="16px Arial",e.fillStyle="white",e.fillText(`Health: ${r}`,15,25),e.font="20px Arial",e.fillStyle="white",e.fillText(`Score: ${c}`,t.width-100,25),r<=0?(y=!1,t.style.display="none",d.style.display="flex",s.textContent=`Your final score: ${c}`):requestAnimationFrame(m))}setInterval((()=>{y&&function(){const e=Math.random()*t.width;o.push(new f(e,0))}()}),1e3),n.addEventListener("click",(()=>{i.style.display="none",t.style.display="block",y=!0,m()})),l.addEventListener("click",(function(){d.style.display="none",i.style.display="flex",o=[],c=0,r=100,y=!1}))})();